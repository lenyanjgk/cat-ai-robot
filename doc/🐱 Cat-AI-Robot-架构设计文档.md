# Cat-AI-Robot æ¶æ„è®¾è®¡æ–‡æ¡£

## ğŸ“‹ ç›®å½•

- [1. é¡¹ç›®æ¦‚è¿°](#1-é¡¹ç›®æ¦‚è¿°)
- [2. æ•´ä½“æ¶æ„è®¾è®¡](#2-æ•´ä½“æ¶æ„è®¾è®¡)
- [3. æŠ€æœ¯æ ˆé€‰å‹ä¸ç†ç”±](#3-æŠ€æœ¯æ ˆé€‰å‹ä¸ç†ç”±)
- [4. æ¨¡å—è®¾è®¡ä¸åˆ†å·¥](#4-æ¨¡å—è®¾è®¡ä¸åˆ†å·¥)
- [5. æ•°æ®åº“è®¾è®¡](#5-æ•°æ®åº“è®¾è®¡)
- [6. æ¥å£è®¾è®¡](#6-æ¥å£è®¾è®¡)
- [7. éƒ¨ç½²æ¶æ„](#7-éƒ¨ç½²æ¶æ„)
- [8. å®‰å…¨è®¾è®¡](#8-å®‰å…¨è®¾è®¡)
- [9. æ€§èƒ½ä¼˜åŒ–](#9-æ€§èƒ½ä¼˜åŒ–)
- [10. æ‰©å±•æ€§è®¾è®¡](#10-æ‰©å±•æ€§è®¾è®¡)

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®ç®€ä»‹

**Cat-AI-Robot** æ˜¯ä¸€ä¸ªåŸºäºSpring AIæ¡†æ¶çš„æ™ºèƒ½èŠå¤©æœºå™¨äººç³»ç»Ÿï¼Œæ”¯æŒæ–‡æœ¬å¯¹è¯ã€è¯­éŸ³äº¤äº’ã€è§’è‰²ç®¡ç†ç­‰åŠŸèƒ½ã€‚é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œä¸ºç”¨æˆ·æä¾›æµç•…çš„AIå¯¹è¯ä½“éªŒã€‚

**å¼€å‘å‘¨æœŸ**ï¼š2025å¹´9æœˆ22æ—¥ - 2025å¹´9æœˆ28æ—¥ï¼ˆ7å¤©ï¼‰
**å¼€å‘å›¢é˜Ÿ**ï¼š3äººå°ç»„åä½œå®Œæˆ
**é¡¹ç›®ç‰¹ç‚¹**ï¼šå¿«é€ŸåŸå‹å¼€å‘ï¼Œæ•æ·è¿­ä»£ï¼Œé«˜æ•ˆåä½œ

### 1.2 æ ¸å¿ƒåŠŸèƒ½

- **ğŸ¤– æ™ºèƒ½å¯¹è¯**ï¼šæ”¯æŒå¤šè½®ä¸Šä¸‹æ–‡å¯¹è¯ï¼Œé›†æˆå¤šç§AIå¤§æ¨¡å‹
- **ğŸ™ï¸ è¯­éŸ³äº¤äº’**ï¼šè¯­éŸ³è¯†åˆ«ï¼ˆASRï¼‰ä¸è¯­éŸ³åˆæˆï¼ˆTTSï¼‰
- **ğŸ‘¥ è§’è‰²ç®¡ç†**ï¼šè‡ªå®šä¹‰AIåŠ©æ‰‹è§’è‰²ï¼ŒåŒ…å«ä¸ªæ€§åŒ–è®¾å®š
- **ğŸ’¾ ä¼šè¯ç®¡ç†**ï¼šèŠå¤©å†å²è®°å½•ï¼Œæ”¯æŒä¼šè¯é‡å‘½åå’Œåˆ é™¤
- **ğŸ“ æ–‡ä»¶ç®¡ç†**ï¼šåŸºäºMinIOçš„å¤šåª’ä½“æ–‡ä»¶å­˜å‚¨

### 1.3 æŠ€æœ¯ç‰¹è‰²

- **æµå¼å“åº”**ï¼šå®æ—¶æµå¼AIå¯¹è¯ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
- **å¤šæ¨¡å‹æ”¯æŒ**ï¼šå…¼å®¹OpenAIã€é˜¿é‡Œäº‘ç™¾ç‚¼ç­‰å¤šç§AIæœåŠ¡
- **å¿«é€Ÿå¼€å‘**ï¼šä¸€å‘¨å†…ä»é›¶åˆ°å®Œæ•´äº§å“çš„æ•æ·å¼€å‘æ¨¡å¼
- **å®¹å™¨åŒ–éƒ¨ç½²**ï¼šæ”¯æŒDockerå®¹å™¨åŒ–éƒ¨ç½²

### 1.4 å¼€å‘é‡Œç¨‹ç¢‘


| æ—¥æœŸ       | é‡Œç¨‹ç¢‘                       | è´Ÿè´£è§’è‰²       |
| ---------- | ---------------------------- | -------------- |
| 2025-09-22 | é¡¹ç›®å¯åŠ¨ï¼Œæ¶æ„è®¾è®¡ï¼Œç¯å¢ƒæ­å»º | å…¨ä½“æˆå‘˜       |
| 2025-09-23 | åç«¯åŸºç¡€æ¡†æ¶ï¼Œæ•°æ®åº“è®¾è®¡     | åç«¯å¼€å‘å·¥ç¨‹å¸ˆ |
| 2025-09-24 | å‰ç«¯æ¡†æ¶æ­å»ºï¼Œç»„ä»¶å¼€å‘       | å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ |
| 2025-09-25 | AIæœåŠ¡é›†æˆï¼Œè¯­éŸ³åŠŸèƒ½å¼€å‘     | å…¨æ ˆå¼€å‘å·¥ç¨‹å¸ˆ |
| 2025-09-26 | å‰åç«¯è”è°ƒï¼ŒåŠŸèƒ½æµ‹è¯•         | å…¨ä½“æˆå‘˜       |
| 2025-09-27 | éƒ¨ç½²é…ç½®ï¼Œæ€§èƒ½ä¼˜åŒ–           | å…¨ä½“æˆå‘˜       |
| 2025-09-28 | æ–‡æ¡£æ•´ç†ï¼Œé¡¹ç›®äº¤ä»˜           | å…¨ä½“æˆå‘˜       |

---

## 2. æ•´ä½“æ¶æ„è®¾è®¡

### 2.1 ç³»ç»Ÿæ¶æ„å›¾

![1759069664395](images/ğŸ±Cat-AI-Robot-æ¶æ„è®¾è®¡æ–‡æ¡£/1759069664395.png)

### 2.2 æ•°æ®æµæ¶æ„

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant F as å‰ç«¯(Vue3)
    participant N as Nginx
    participant B as åç«¯(Spring Boot)
    participant AI as AIæœåŠ¡(Spring AI)
    participant DB as æ•°æ®åº“(PostgreSQL)
    participant S as å­˜å‚¨(MinIO)

    U->>F: å‘é€æ¶ˆæ¯
    F->>N: HTTPè¯·æ±‚
    N->>B: è½¬å‘è¯·æ±‚
    B->>DB: æŸ¥è¯¢å†å²è®°å½•
    DB-->>B: è¿”å›å†å²æ•°æ®
    B->>AI: è°ƒç”¨AIæ¨¡å‹
    AI-->>B: æµå¼è¿”å›å“åº”
    B-->>F: SSEæµå¼å“åº”
    F-->>U: å®æ—¶æ˜¾ç¤ºå›å¤
    B->>DB: ä¿å­˜å¯¹è¯è®°å½•
  
    opt è¯­éŸ³æ¶ˆæ¯
        U->>F: å½•åˆ¶è¯­éŸ³
        F->>S: ä¸Šä¼ è¯­éŸ³æ–‡ä»¶
        S-->>F: è¿”å›æ–‡ä»¶URL
        F->>B: å‘é€è¯­éŸ³URL
        B->>AI: è¯­éŸ³è¯†åˆ«
        AI-->>B: è¿”å›æ–‡æœ¬
        B->>AI: æ–‡æœ¬å¯¹è¯
        AI-->>B: è¿”å›å›å¤æ–‡æœ¬
        B->>AI: è¯­éŸ³åˆæˆ
        AI-->>B: è¿”å›è¯­éŸ³URL
        B->>S: å­˜å‚¨å›å¤è¯­éŸ³
        B-->>F: è¿”å›æ–‡æœ¬+è¯­éŸ³
    end
```

---

## 3. æŠ€æœ¯æ ˆé€‰å‹ä¸ç†ç”±

### 3.1 åç«¯æŠ€æœ¯æ ˆ


| æŠ€æœ¯ç»„ä»¶         | ç‰ˆæœ¬   | é€‰æ‹©ç†ç”±                             |
| ---------------- | ------ | ------------------------------------ |
| **Java**         | 21     | æœ€æ–°LTSç‰ˆæœ¬ï¼Œè™šæ‹Ÿçº¿ç¨‹æå‡å¹¶å‘æ€§èƒ½    |
| **Spring Boot**  | 3.4.5  | å¿«é€Ÿå¼€å‘ï¼Œè‡ªåŠ¨é…ç½®ï¼Œé€‚åˆä¸€å‘¨å¼€å‘å‘¨æœŸ |
| **Spring AI**    | 1.0.0  | å®˜æ–¹AIé›†æˆæ¡†æ¶ï¼Œå‡å°‘AIæœåŠ¡é›†æˆæ—¶é—´   |
| **MyBatis-Plus** | 3.5.12 | ä»£ç ç”Ÿæˆå·¥å…·ï¼ŒåŠ é€Ÿå¼€å‘æ•ˆç‡           |
| **PostgreSQL**   | 17     | æˆç†Ÿç¨³å®šï¼Œpgvectoræ‰©å±•æ”¯æŒå‘é‡æœç´¢   |
| **MinIO**        | æœ€æ–°   | è½»é‡çº§å¯¹è±¡å­˜å‚¨ï¼Œå¿«é€Ÿéƒ¨ç½²             |

**å¿«é€Ÿå¼€å‘è€ƒè™‘ï¼š**

1. **Spring Boot 3**: é›¶é…ç½®å¯åŠ¨ï¼Œå‡å°‘50%çš„é…ç½®æ—¶é—´
2. **Spring AI**: ç»Ÿä¸€AIæ¥å£ï¼Œé¿å…é‡å¤å¼€å‘é€‚é…å±‚
3. **MyBatis-Plus**: ä»£ç ç”Ÿæˆå™¨ï¼Œå¿«é€Ÿç”ŸæˆCRUDä»£ç 
4. **ä¸€ä½“åŒ–æŠ€æœ¯æ ˆ**: å‡å°‘æŠ€æœ¯å­¦ä¹ æˆæœ¬ï¼Œæå‡å¼€å‘æ•ˆç‡

### 3.2 å‰ç«¯æŠ€æœ¯æ ˆ


| æŠ€æœ¯ç»„ä»¶           | ç‰ˆæœ¬   | é€‰æ‹©ç†ç”±                           |
| ------------------ | ------ | ---------------------------------- |
| **Vue.js**         | 3.5.13 | å­¦ä¹ æ›²çº¿å¹³ç¼“ï¼Œå¿«é€Ÿä¸Šæ‰‹             |
| **Vite**           | 6.2.4  | æé€Ÿçƒ­æ›´æ–°ï¼Œæå‡å¼€å‘ä½“éªŒ           |
| **Ant Design Vue** | 4.2.6  | å¼€ç®±å³ç”¨çš„UIç»„ä»¶ï¼Œå‡å°‘æ ·å¼å¼€å‘æ—¶é—´ |
| **Tailwind CSS**   | 4.1.8  | åŸå­åŒ–CSSï¼Œå¿«é€Ÿæ ·å¼å¼€å‘            |
| **markdown-it**    | 14.1.0 | AIå›å¤æ ¼å¼åŒ–æ˜¾ç¤º                   |

**å¿«é€Ÿå¼€å‘ä¼˜åŠ¿ï¼š**

1. **Viteæ„å»º**: ç›¸æ¯”Webpackå¿«10å€ï¼Œçƒ­æ›´æ–°ç§’çº§å“åº”
2. **Ant Design**: ä¸°å¯Œç»„ä»¶åº“ï¼Œå‡å°‘80%çš„UIå¼€å‘æ—¶é—´
3. **Tailwind**: åŸå­åŒ–CSSï¼Œæ— éœ€ç¼–å†™è‡ªå®šä¹‰æ ·å¼æ–‡ä»¶
4. **Vue 3ç»„åˆå¼API**: ä»£ç å¤ç”¨æ€§å¼ºï¼Œé€»è¾‘æ¸…æ™°

### 3.3 AIæœåŠ¡é€‰æ‹©


| AIæœåŠ¡             | åº”ç”¨åœºæ™¯         | å¿«é€Ÿé›†æˆä¼˜åŠ¿               |
| ------------------ | ---------------- | -------------------------- |
| **é˜¿é‡Œäº‘ç™¾ç‚¼**     | ä¸»è¦æ–‡æœ¬å¯¹è¯æ¨¡å‹ | å›½å†…æœåŠ¡ç¨³å®šï¼Œæ¥å£ç®€å•     |
| **OpenAIå…¼å®¹æ¥å£** | å¤‡é€‰æ–¹æ¡ˆ         | Spring AIåŸç”Ÿæ”¯æŒ          |
| **Paraformer**     | è¯­éŸ³è¯†åˆ«         | å¼€æºå…è´¹ï¼Œæœ¬åœ°éƒ¨ç½²         |
| **é˜¿é‡Œäº‘è¯­éŸ³åˆæˆ** | æ–‡æœ¬è½¬è¯­éŸ³(TTS)  | é«˜è´¨é‡è¯­éŸ³åˆæˆï¼Œå¤šéŸ³è‰²æ”¯æŒ |

**ä¸€å‘¨å¼€å‘çš„æŠ€æœ¯å†³ç­–ï¼š**

- **ä¼˜å…ˆç¨³å®šæ€§**: é€‰æ‹©æˆç†Ÿçš„äº‘æœåŠ¡ï¼Œé¿å…è‡ªå»ºAIæœåŠ¡çš„å¤æ‚åº¦
- **å¿«é€Ÿé›†æˆ**: ä½¿ç”¨Spring AIç»Ÿä¸€æ¥å£ï¼Œå‡å°‘é€‚é…å¼€å‘æ—¶é—´
- **é™ä½é—¨æ§›**: é€‰æ‹©æ–‡æ¡£å®Œå–„ã€ç¤¾åŒºæ´»è·ƒçš„æŠ€æœ¯æ ˆ

---

## 4. æ¨¡å—è®¾è®¡ä¸åˆ†å·¥

### 4.1 ä¸‰äººå°ç»„åˆ†å·¥æ–¹æ¡ˆ

![1759069674508](images/ğŸ±Cat-AI-Robot-æ¶æ„è®¾è®¡æ–‡æ¡£/1759069674508.png)!

### 4.2 è¯¦ç»†åˆ†å·¥èŒè´£

#### 4.2.1 åç«¯å¼€å‘å·¥ç¨‹å¸ˆ - [å´å…‰è€€]

**è¦è´Ÿè´£çš„æ¨¡å—ï¼š**

- [ ]  åç«¯é¡¹ç›®æ¶æ„è®¾è®¡
- [ ]  PostgreSQL æ•°æ®åº“è®¾è®¡
- [ ]  åç«¯é¡¹ç›®æ¡†æ¶æ­å»º
- [ ]  Spring AI é›†æˆä¸é…ç½®
- [ ]  æ–‡ä»¶ä¸Šä¼  minio å®ç°
- [ ]  ä¼šè¯ç®¡ç†ï¼Œå†å²æ¶ˆæ¯ç®¡ç†ï¼Œæµå¼å¯¹è¯ä¸è¯­éŸ³å¯¹è¯ï¼ˆå«è¯­éŸ³è¯†åˆ«ï¼Œæ–‡æœ¬å¯¹è¯ï¼Œè¯­éŸ³åˆæˆï¼‰çš„å®ç°
- [ ]  å¯¹è¯è®°å¿† Advisorã€æµå¼å¯¹è¯æ—¥å¿— Advisor å¼€å‘

**éœ€è¦æŒæ¡çš„æŠ€æœ¯è¦ç‚¹ï¼š**

- **åç«¯æ¡†æ¶ä¸æ¶æ„**
  - Spring Boot 3.4.5ï¼ˆJava 21 ç”Ÿæ€ï¼‰
  - Spring AI æ¡†æ¶é›†æˆä¸æ‰©å±•
  - é¡¹ç›®åˆ†å±‚æ¶æ„è®¾è®¡ï¼ˆController-Service-Repository-Advisorï¼‰
  - æµå¼å“åº”å¤„ç†ï¼ˆSSE / WebFluxï¼‰
- **æ•°æ®åº“ä¸å­˜å‚¨**
  - PostgreSQL æ•°æ®åº“è®¾è®¡ä¸ä¼˜åŒ–
  - pgvector å‘é‡æ£€ç´¢ä¸è¯­ä¹‰æœç´¢é›†æˆ
  - MinIO æ–‡ä»¶å­˜å‚¨ä¸ä¸Šä¼ ç®¡ç†ã€‚
- **å¯¹è¯ä¸ä¼šè¯ç®¡ç†**
  - ä¼šè¯ä¸å†å²æ¶ˆæ¯ç®¡ç†
  - æµå¼å¯¹è¯å¤„ç†ï¼ˆSSE æ¨é€æ¶ˆæ¯æµï¼‰
  - è¯­éŸ³äº¤äº’ï¼š
    - è¯­éŸ³è¯†åˆ«ï¼ˆASRï¼‰
    - æ–‡æœ¬å¯¹è¯ï¼ˆLLM API é›†æˆï¼‰
    - è¯­éŸ³åˆæˆï¼ˆTTSï¼‰
- **æ™ºèƒ½å¯¹è¯æ‰©å±•**
  - è‡ªå®šä¹‰ Advisor æœºåˆ¶ï¼ˆå¯¹è¯è®°å¿†ã€ä¸Šä¸‹æ–‡ç®¡ç†ï¼Œæµå¼å¯¹è¯æ—¥å¿—ï¼‰
  - æ’ä»¶å¼æ‰©å±•ä¸å¤šè§’è‰²å¯¹è¯æ”¯æŒ
  - ä¸Šä¸‹æ–‡ç¼“å­˜ä¸æŒä¹…åŒ–æ–¹æ¡ˆ

**å®é™…å¼€å‘æ—¶é—´çº¿ï¼š**

- Day 1: é¡¹ç›®æ¶æ„æ­å»ºï¼Œæ•°æ®åº“è®¾è®¡ï¼Œæ–‡ä»¶ä¸Šä¼ ï¼Œä¼šè¯ç®¡ç†ï¼Œå†å²èŠå¤©è®°å½•ç®¡ç†çš„å®ç°ã€‚
- Day 2: æµå¼å¯¹è¯ï¼Œå¯¹è¯è®°å¿† Advisorï¼Œæµå¼å¯¹è¯æ—¥å¿— Advisorï¼Œè¯­éŸ³å¯¹è¯ï¼ˆå«è¯­éŸ³è¯†åˆ«ï¼Œæ–‡æœ¬å¯¹è¯ï¼Œè¯­éŸ³åˆæˆï¼‰é€»è¾‘å¼€å‘ã€‚
- Day 3: æ–°å»ºå¯¹è¯ï¼Œè¯­éŸ³å¯¹è¯å®Œå–„ã€‚
- Day 4: æµå¼æ¶ˆæ¯å®Œå–„ï¼Œå¯¹è¯ç®¡ç†å®Œå–„ã€‚
- Day 5: è¯­éŸ³å¯¹è¯ï¼Œå†å²å¯¹è¯ç®¡ç†å®Œå–„ï¼Œè§’è‰²ç®¡ç†å¢åŠ å¯¹è§’è‰²å¤´åƒæ”¯æŒã€‚
- Day 6: æ–°å»ºä¼šè¯å…¼å®¹è¯­éŸ³æ¥å£ã€‚
- Day 7: ç³»ç»Ÿé›†æˆæµ‹è¯•ã€‚

#### 4.2.2 å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ - [æå¤©å®‡]

**è¦è´Ÿè´£çš„æ¨¡å—ï¼š**

- [ ]  Vue3 + Viteé¡¹ç›®æ­å»º
- [ ]  èŠå¤©ç•Œé¢è®¾è®¡ä¸å¼€å‘
- [ ]  è§’è‰²ç®¡ç†ç•Œé¢
- [ ]  æµå¼Markdownæ¸²æŸ“ç»„ä»¶
- [ ]  å“åº”å¼å¸ƒå±€è®¾è®¡
- [ ]  ç”¨æˆ·äº¤äº’ä½“éªŒä¼˜åŒ–

**éœ€è¦æŒæ¡çš„æŠ€æœ¯è¦ç‚¹ï¼š**

- Vue 3ç»„åˆå¼API
- Ant Design Vueç»„ä»¶åº“
- Tailwind CSSæ ·å¼æ¡†æ¶
- SSEæµå¼æ•°æ®å¤„ç†
- WebRTCè¯­éŸ³å½•åˆ¶

**è®¡åˆ’å¼€å‘æ—¶é—´çº¿ï¼š**

- Day 1: å‰ç«¯é¡¹ç›®åˆå§‹åŒ–ï¼ŒåŸºç¡€ç»„ä»¶
- Day 2-3: èŠå¤©ç•Œé¢æ ¸å¿ƒåŠŸèƒ½
- Day 4: è§’è‰²ç®¡ç†æ¨¡å—
- Day 5-6: UIä¼˜åŒ–å’Œäº¤äº’å®Œå–„
- Day 7: å‰ç«¯æµ‹è¯•å’Œéƒ¨ç½²

#### 4.2.3 å…¨æ ˆå¼€å‘å·¥ç¨‹å¸ˆ - [æ±Ÿå›½å‡¯]

**è¦è´Ÿè´£çš„æ¨¡å—ï¼š**

- [ ]  åç«¯ä»£ç çš„ä¼˜åŒ–å’Œæ•°æ®åº“å­—æ®µçš„ä¿®æ­£ï¼Œå‰ç«¯ä»£ç èŠå¤©é‡è¦é€»è¾‘å¤„ç†
- [ ]  MinIOæ–‡ä»¶å­˜å‚¨é›†æˆï¼Œå‰åç«¯æ–‡ä»¶ä¸Šä¼ é›†æˆ
- [ ]  Dockerå®¹å™¨åŒ–éƒ¨ç½² ç›¸å…³ç»„ä»¶å’ŒPostgreSQL æ•°æ®åº“
- [ ]  å‰åç«¯è”è°ƒæµ‹è¯•ï¼Œå‰åç«¯ä»£ç ä¼˜åŒ–ç»†èŠ‚
- [ ]  ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–ï¼ŒåŠ è½½é¡µé¢æ—¶é—´å’Œé¡µé¢æ•ˆæœ
- [ ]  éƒ¨ç½²å’Œæ¶æ„æ–‡æ¡£ç¼–å†™
- [ ]  å‰åç«¯ä¸Šçº¿éƒ¨ç½² è”è°ƒå’Œç½‘ç»œåŒºåŸŸé—®é¢˜è§£å†³nginx

**éœ€è¦æŒæ¡çš„æŠ€æœ¯è¦ç‚¹ï¼š**

- WebRTCéŸ³é¢‘å¤„ç†
- MinIOå¯¹è±¡å­˜å‚¨
- Dockerå®¹å™¨åŒ–
- Nginxåå‘ä»£ç†
- ç³»ç»Ÿé›†æˆæµ‹è¯•

**è®¡åˆ’å¼€å‘æ—¶é—´çº¿ï¼š**

- Day 1: å¼€å‘ç¯å¢ƒæ­å»º
- Day 2-3: è¯­éŸ³åŠŸèƒ½å¼€å‘
- Day 4: æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½
- Day 5: å‰åç«¯è”è°ƒ
- Day 6: éƒ¨ç½²ç¯å¢ƒé…ç½®
- Day 7: ç³»ç»Ÿæµ‹è¯•å’Œæ–‡æ¡£

### 4.3 åä½œæœºåˆ¶

#### 4.3.1 æ¯æ—¥ç«™ä¼šå®‰æ’


| æ—¶é—´                | å†…å®¹       | å‚ä¸äººå‘˜ |
| ------------------- | ---------- | -------- |
| **æ¯æ—¥9:00-9:15**   | æ—¥å¸¸åŒæ­¥ä¼š | å…¨ä½“æˆå‘˜ |
| **æ¯æ—¥18:00-18:30** | è¿›åº¦å›é¡¾ä¼š | å…¨ä½“æˆå‘˜ |
| **æ¯æ—¥21:00-21:15** | æ¬¡æ—¥è®¡åˆ’ä¼š | å…¨ä½“æˆå‘˜ |

#### 4.3.2 å…³é”®èŠ‚ç‚¹è¯„å®¡

```mermaid
gantt
    title ä¸€å‘¨å¼€å‘è®¡åˆ’
    dateFormat  YYYY-MM-DD
    section æ¶æ„è®¾è®¡
    é¡¹ç›®å¯åŠ¨      :2025-09-22, 1d
    section åç«¯å¼€å‘
    æ¡†æ¶æ­å»º      :2025-09-23, 1d
    ä¸šåŠ¡å¼€å‘      :2025-09-24, 2d
    section å‰ç«¯å¼€å‘
    é¡µé¢å¼€å‘      :2025-09-24, 2d
    ç»„ä»¶ä¼˜åŒ–      :2025-09-26, 1d
    section ç³»ç»Ÿé›†æˆ
    è”è°ƒæµ‹è¯•      :2025-09-26, 1d
    éƒ¨ç½²ä¸Šçº¿      :2025-09-27, 2d
```

---

## 5. æ•°æ®åº“è®¾è®¡

### 5.1 æ•°æ®åº“ERå›¾

```mermaid
erDiagram
    t_role ||--o{ t_chat : "ä¸€ä¸ªè§’è‰²å¯ä»¥æœ‰å¤šä¸ªå¯¹è¯"
    t_chat ||--o{ t_chat_message : "ä¸€ä¸ªå¯¹è¯åŒ…å«å¤šæ¡æ¶ˆæ¯"

    t_role {
        BIGINT id PK "ä¸»é”®ID"
        VARCHAR name "è§’è‰²åç§°"
        TEXT introduction "è§’è‰²ä»‹ç»"
        TEXT system_prompt "ç³»ç»Ÿæç¤ºè¯"
        VARCHAR avatar_url "å¤´åƒURL"
        TIMESTAMP create_time "åˆ›å»ºæ—¶é—´"
        TIMESTAMP update_time "æ›´æ–°æ—¶é—´"
    }

    t_chat {
        BIGINT id PK "ä¸»é”®ID"
        BIGINT role_id FK "å…³è”è§’è‰²ID"
        VARCHAR uuid UK "å¯¹è¯UUID"
        VARCHAR summary "å¯¹è¯æ‘˜è¦"
        TIMESTAMP create_time "åˆ›å»ºæ—¶é—´"
        TIMESTAMP update_time "æ›´æ–°æ—¶é—´"
    }

    t_chat_message {
        BIGINT id PK "ä¸»é”®ID"
        VARCHAR chat_uuid FK "å…³è”å¯¹è¯UUID"
        TEXT content "æ¶ˆæ¯å†…å®¹"
        VARCHAR role "æ¶ˆæ¯è§’è‰²(user/assistant)"
        VARCHAR audio_url "è¯­éŸ³æ–‡ä»¶URL"
        TIMESTAMP create_time "åˆ›å»ºæ—¶é—´"
    }
```

### 5.2 å¿«é€Ÿå¼€å‘çš„æ•°æ®åº“è®¾è®¡åŸåˆ™

#### 5.2.1 ç®€åŒ–è®¾è®¡åŸåˆ™

1. **æœ€å°å¯ç”¨åŸåˆ™**: åªè®¾è®¡å¿…éœ€çš„æ ¸å¿ƒè¡¨ï¼Œé¿å…è¿‡åº¦è®¾è®¡
2. **å¿«é€Ÿè¿­ä»£**: ä½¿ç”¨è‡ªå¢ä¸»é”®ï¼Œå‡å°‘å¤æ‚å…³è”
3. **çµæ´»æ‰©å±•**: ä½¿ç”¨JSONå­—æ®µå­˜å‚¨éæ ¸å¿ƒå±æ€§
4. **å¼€å‘å‹å¥½**: ç»Ÿä¸€æ—¶é—´å­—æ®µåç§°å’Œç±»å‹

#### 5.2.2 è¡¨ç»“æ„è®¾è®¡

**è§’è‰²è¡¨ (t_role) - ç²¾ç®€è®¾è®¡**


| å­—æ®µå        | ç±»å‹         | è¯´æ˜       | å¿«é€Ÿå¼€å‘è€ƒè™‘               |
| ------------- | ------------ | ---------- | -------------------------- |
| id            | BIGINT AUTO  | ä¸»é”®       | è‡ªå¢ä¸»é”®ï¼Œé¿å…UUIDç”Ÿæˆé€»è¾‘ |
| name          | VARCHAR(40)  | è§’è‰²åç§°   | é•¿åº¦é€‚ä¸­ï¼Œæ»¡è¶³åŸºæœ¬éœ€æ±‚     |
| introduction  | TEXT         | è§’è‰²ä»‹ç»   | TEXTç±»å‹ï¼Œæ— é•¿åº¦é™åˆ¶       |
| system_prompt | TEXT         | ç³»ç»Ÿæç¤ºè¯ | æ ¸å¿ƒä¸šåŠ¡å­—æ®µ               |
| avatar_url    | VARCHAR(500) | å¤´åƒURL    | é¢„ç•™è¶³å¤Ÿé•¿åº¦               |
| create_time   | TIMESTAMP    | åˆ›å»ºæ—¶é—´   | ç»Ÿä¸€æ—¶é—´å­—æ®µè®¾è®¡           |
| update_time   | TIMESTAMP    | æ›´æ–°æ—¶é—´   | è‡ªåŠ¨æ›´æ–°æ—¶é—´æˆ³             |

**å¯¹è¯è¡¨ (t_chat) - æ ¸å¿ƒè®¾è®¡**


| å­—æ®µå  | ç±»å‹        | è¯´æ˜     | å¿«é€Ÿå¼€å‘è€ƒè™‘           |
| ------- | ----------- | -------- | ---------------------- |
| id      | BIGINT AUTO | ä¸»é”®     | è‡ªå¢ä¸»é”®               |
| role_id | BIGINT      | å…³è”è§’è‰² | ç®€å•å¤–é”®å…³è”           |
| uuid    | VARCHAR(60) | å¯¹è¯æ ‡è¯† | å‰ç«¯ç”ŸæˆUUID           |
| summary | VARCHAR(60) | å¯¹è¯æ‘˜è¦ | å¯é€‰å­—æ®µï¼ŒåæœŸå¯AIç”Ÿæˆ |

**æ¶ˆæ¯è¡¨ (t_chat_message) - æ ¸å¿ƒä¸šåŠ¡**


| å­—æ®µå    | ç±»å‹        | è¯´æ˜     | å¿«é€Ÿå¼€å‘è€ƒè™‘           |
| --------- | ----------- | -------- | ---------------------- |
| id        | BIGINT AUTO | ä¸»é”®     | è‡ªå¢ä¸»é”®               |
| chat_uuid | VARCHAR(60) | å¯¹è¯å…³è” | é€šè¿‡UUIDå…³è”ï¼Œé¿å…JOIN |
| content   | TEXT        | æ¶ˆæ¯å†…å®¹ | æ”¯æŒé•¿æ–‡æœ¬å’ŒMarkdown   |
| role      | VARCHAR(12) | æ¶ˆæ¯è§’è‰² | æšä¸¾å€¼ï¼šuser/assistant |
| audio_url | VARCHAR     | è¯­éŸ³URL  | å¯é€‰å­—æ®µï¼Œæ”¯æŒè¯­éŸ³æ¶ˆæ¯ |

### 5.3 ä¸€å‘¨å¼€å‘çš„ç´¢å¼•ç­–ç•¥

```sql
-- æ ¸å¿ƒæŸ¥è¯¢ç´¢å¼• - ä¼˜å…ˆçº§é«˜
CREATE INDEX idx_message_chat_uuid ON t_chat_message(chat_uuid);
CREATE INDEX idx_message_create_time ON t_chat_message(create_time DESC);

-- è¾…åŠ©æŸ¥è¯¢ç´¢å¼• - æ¬¡è¦
CREATE INDEX idx_chat_role_id ON t_chat(role_id);
CREATE INDEX idx_chat_update_time ON t_chat(update_time DESC);

-- å”¯ä¸€çº¦æŸ
CREATE UNIQUE INDEX idx_chat_uuid ON t_chat(uuid);
```

**ç´¢å¼•è®¾è®¡åŸåˆ™ï¼š**

- ä¼˜å…ˆä¸ºé«˜é¢‘æŸ¥è¯¢åˆ›å»ºç´¢å¼•
- é¿å…è¿‡å¤šç´¢å¼•å½±å“å†™å…¥æ€§èƒ½
- åŸºäºå®é™…æŸ¥è¯¢æ¨¡å¼è°ƒæ•´ç´¢å¼•

---

## 6. æ¥å£è®¾è®¡

### 6.1 å¿«é€Ÿå¼€å‘çš„APIè®¾è®¡åŸåˆ™

#### 6.1.1 RESTfulé£æ ¼ç®€åŒ–


| æ“ä½œç±»å‹     | HTTPæ–¹æ³• | è·¯å¾„è®¾è®¡               | å¿«é€Ÿå¼€å‘ä¼˜åŠ¿     |
| ------------ | -------- | ---------------------- | ---------------- |
| **åˆ›å»ºèµ„æº** | POST     | /api/{resource}        | ç»Ÿä¸€åˆ›å»ºæ¥å£     |
| **æŸ¥è¯¢åˆ—è¡¨** | POST     | /api/{resource}/list   | æ”¯æŒå¤æ‚æŸ¥è¯¢æ¡ä»¶ |
| **æ›´æ–°èµ„æº** | POST     | /api/{resource}/update | ç®€åŒ–HTTPæ–¹æ³•     |
| **åˆ é™¤èµ„æº** | POST     | /api/{resource}/delete | ç»Ÿä¸€POSTè¯·æ±‚     |

**è®¾è®¡ç†å¿µï¼š**

- ç»Ÿä¸€ä½¿ç”¨POSTæ–¹æ³•ï¼Œå‡å°‘HTTPæ–¹æ³•å¤æ‚åº¦
- é€šè¿‡è·¯å¾„åç¼€åŒºåˆ†æ“ä½œç±»å‹
- ä¾¿äºå‰ç«¯ç»Ÿä¸€å¤„ç†å’Œåç«¯è·¯ç”±ç®¡ç†

### 6.2 æ ¸å¿ƒæ¥å£è®¾è®¡

#### 6.2.1 èŠå¤©æ¥å£ - æ ¸å¿ƒåŠŸèƒ½

![1759069721906](images/ğŸ±Cat-AI-Robot-æ¶æ„è®¾è®¡æ–‡æ¡£/1759069721906.png)

#### 6.2.2 å…³é”®æ¥å£è¯¦ç»†è¯´æ˜

**1. æµå¼å¯¹è¯æ¥å£ - æŠ€æœ¯æ ¸å¿ƒ**

```http
POST /api/chat/completion
Content-Type: application/json
Accept: text/event-stream

Request:
{
  "message": "è¯·ä»‹ç»ä¸€ä¸‹Vue3çš„æ–°ç‰¹æ€§",
  "chatId": "550e8400-e29b-41d4-a716-446655440000",
  "modelName": "qwen-plus", 
  "temperature": 0.7,
  "roleId": 1
}

Response: (SSEæµå¼)
data: {"v": "Vue3"}
data: {"v": "ä¸»è¦æ–°ç‰¹æ€§åŒ…æ‹¬ï¼š"}
data: {"v": "\n\n1. **ç»„åˆå¼API**"}
data: {"v": " - æä¾›æ›´å¥½çš„é€»è¾‘å¤ç”¨"}
...
data: [DONE]
```

**å¿«é€Ÿå¼€å‘æŠ€å·§ï¼š**

- ä½¿ç”¨Spring AIçš„æµå¼å“åº”èƒ½åŠ›
- é€šè¿‡Advisoræ¨¡å¼æ³¨å…¥ä¸Šä¸‹æ–‡
- å‰ç«¯ä½¿ç”¨EventSourceæ¥æ”¶æµå¼æ•°æ®

**2. è¯­éŸ³å¯¹è¯æ¥å£ - åˆ›æ–°åŠŸèƒ½**

```http
POST /api/chat/voice-chat
Content-Type: application/json

Request:
{
  "audioFileUrl": "http://minio:9000/cat-ai-robot/audio/voice_20250925_143022.webm",
  "chatId": "550e8400-e29b-41d4-a716-446655440000",
  "modelName": "qwen-plus",
  "temperature": 0.7,
  "roleId": 1
}

Response:
{
  "success": true,
  "data": {
    "replyText": "æ‚¨å¥½ï¼æˆ‘å¬åˆ°æ‚¨è¯´çš„æ˜¯...",
    "replyAudioUrl": "http://minio:9000/cat-ai-robot/audio/reply_20250925_143025.mp3"
  }
}
```

**æŠ€æœ¯å®ç°è¦ç‚¹ï¼š**

- é›†æˆé˜¿é‡Œäº‘ASRè¿›è¡Œè¯­éŸ³è¯†åˆ«
- ä½¿ç”¨AIæ¨¡å‹ç”Ÿæˆæ–‡æœ¬å›å¤
- é›†æˆTTSæœåŠ¡ç”Ÿæˆè¯­éŸ³å›å¤
- MinIOå­˜å‚¨éŸ³é¢‘æ–‡ä»¶

### 6.3 ç»Ÿä¸€å“åº”æ ¼å¼

#### 6.3.1 æ ‡å‡†å“åº”ç»“æ„

```javascript
// æˆåŠŸå“åº”
{
  "success": true,
  "code": "200",
  "message": "æ“ä½œæˆåŠŸ", 
  "data": {
    // å…·ä½“ä¸šåŠ¡æ•°æ®
  },
  "timestamp": "2025-09-25T14:30:22.123Z"
}

// é”™è¯¯å“åº”
{
  "success": false,
  "code": "400",
  "message": "å‚æ•°éªŒè¯å¤±è´¥",
  "data": null,
  "timestamp": "2025-09-25T14:30:22.123Z"
}
```

#### 6.3.2 åˆ†é¡µæŸ¥è¯¢å“åº”

```javascript
// åˆ†é¡µæ•°æ®æ ¼å¼
{
  "success": true,
  "data": {
    "list": [
      // æ•°æ®åˆ—è¡¨
    ],
    "total": 156,
    "current": 1,
    "size": 20,
    "pages": 8
  }
}
```

**å¿«é€Ÿå¼€å‘ä¼˜åŠ¿ï¼š**

- ç»Ÿä¸€çš„å“åº”æ ¼å¼ä¾¿äºå‰ç«¯å¤„ç†
- æ ‡å‡†åŒ–é”™è¯¯ç ä¾¿äºè°ƒè¯•
- åˆ†é¡µæ ¼å¼ä¸MyBatis-Pluså®Œç¾å¥‘åˆ

---

## 7. éƒ¨ç½²æ¶æ„

### 7.1 ä¸€å‘¨å¼€å‘çš„éƒ¨ç½²ç­–ç•¥

#### 7.1.1 å¿«é€Ÿéƒ¨ç½²æ¶æ„

```mermaid
graph TB
    subgraph "å¼€å‘ç¯å¢ƒ - æœ¬åœ°å¿«é€Ÿè°ƒè¯•"
        DEV1[Spring Boot:8081]
        DEV2[Vue Dev Server:5173]
        DEV3[PostgreSQL:5432]
        DEV4[MinIO:9000]
    end

    subgraph "ç”Ÿäº§ç¯å¢ƒ - Dockerä¸€é”®éƒ¨ç½²"
        PROD1[Nginx:80]
        PROD2[Spring Boot:8081]
        PROD3[PostgreSQL:5432]
        PROD4[MinIO:9000]
        PROD5[Redis:6379]
    end

    DEV1 -.-> PROD2
    DEV2 -.-> PROD1
    DEV3 -.-> PROD3
    DEV4 -.-> PROD4
```

### 7.2 Docker Composeå¿«é€Ÿéƒ¨ç½²

#### 7.2.1 ä¸€é”®å¯åŠ¨é…ç½®

```yaml
# docker-compose.yml - å¿«é€Ÿéƒ¨ç½²ç‰ˆæœ¬
version: '3.8'

services:
  # å‰ç«¯æœåŠ¡ - é™æ€æ–‡ä»¶
  frontend:
    build: 
      context: ./cat-ai-robot-vue3
      dockerfile: Dockerfile
    ports:
      - "80:80"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
    depends_on:
      - backend
    restart: unless-stopped

  # åç«¯æœåŠ¡ - ä¸šåŠ¡æ ¸å¿ƒ
  backend:
    build:
      context: ./cat-ai-robot-springboot
      dockerfile: Dockerfile
    ports:
      - "8081:8081"
    environment:
      - SPRING_PROFILES_ACTIVE=prod
      - DATABASE_URL=jdbc:p6spy:postgresql://postgres:5432/robot
      - DATABASE_USERNAME=postgres
      - DATABASE_PASSWORD=catairobot
      - MINIO_ENDPOINT=http://minio:9000
      - MINIO_ACCESS_KEY=catairobot
      - MINIO_SECRET_KEY=catairobot
      - AI_API_KEY=sk-3ba280e44d184f83a1210d36108db6f8
    depends_on:
      - postgres
      - minio
    restart: unless-stopped

  # æ•°æ®åº“æœåŠ¡
  postgres:
    image: pgvector/pgvector:pg17
    environment:
      POSTGRES_DB: robot
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: catairobot
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./doc/init.sql:/docker-entrypoint-initdb.d/1-init.sql:ro
      - ./doc/default_roles_insert.sql:/docker-entrypoint-initdb.d/2-roles.sql:ro
    ports:
      - "15432:5432"
    restart: unless-stopped

  # å¯¹è±¡å­˜å‚¨æœåŠ¡
  minio:
    image: minio/minio:RELEASE.2023-09-30T07-02-29Z
    command: server /data --console-address ":9001"
    environment:
      MINIO_ROOT_USER: catairobot
      MINIO_ROOT_PASSWORD: catairobot
    volumes:
      - minio_data:/data
    ports:
      - "19000:9000"
      - "19001:9001"
    restart: unless-stopped

volumes:
  postgres_data:
    driver: local
  minio_data:
    driver: local

networks:
  default:
    driver: bridge
```

### 7.3 å¿«é€Ÿéƒ¨ç½²è„šæœ¬

#### 7.3.1 ä¸€é”®éƒ¨ç½²å‘½ä»¤

```bash
#!/bin/bash
# deploy.sh - ä¸€é”®éƒ¨ç½²è„šæœ¬

echo "ğŸš€ Cat-AI-Robot ä¸€é”®éƒ¨ç½²å¼€å§‹..."

# 1. æ£€æŸ¥ç¯å¢ƒ
echo "ğŸ“‹ æ£€æŸ¥Dockerç¯å¢ƒ..."
if ! command -v docker &> /dev/null; then
    echo "âŒ Docker æœªå®‰è£…ï¼Œè¯·å…ˆå®‰è£…Docker"
    exit 1
fi

if ! command -v docker-compose &> /dev/null; then
    echo "âŒ Docker Compose æœªå®‰è£…ï¼Œè¯·å…ˆå®‰è£…Docker Compose"
    exit 1
fi

# 2. æ„å»ºå’Œå¯åŠ¨æœåŠ¡
echo "ğŸ—ï¸ æ„å»ºå¹¶å¯åŠ¨æœåŠ¡..."
docker-compose down
docker-compose build --no-cache
docker-compose up -d

# 3. ç­‰å¾…æœåŠ¡å¯åŠ¨
echo "â³ ç­‰å¾…æœåŠ¡å¯åŠ¨..."
sleep 30

# 4. å¥åº·æ£€æŸ¥
echo "ğŸ” æœåŠ¡å¥åº·æ£€æŸ¥..."
if curl -f http://localhost:80 > /dev/null 2>&1; then
    echo "âœ… å‰ç«¯æœåŠ¡æ­£å¸¸"
else
    echo "âŒ å‰ç«¯æœåŠ¡å¼‚å¸¸"
fi

if curl -f http://localhost:8081/actuator/health > /dev/null 2>&1; then
    echo "âœ… åç«¯æœåŠ¡æ­£å¸¸"
else
    echo "âŒ åç«¯æœåŠ¡å¼‚å¸¸"
fi

echo "ğŸ‰ éƒ¨ç½²å®Œæˆï¼"
echo "ğŸ“± å‰ç«¯åœ°å€: http://localhost"
echo "ğŸ”§ åç«¯åœ°å€: http://localhost:8081"
echo "ğŸ’¾ æ•°æ®åº“åœ°å€: localhost:15432"
echo "ğŸ“ MinIOæ§åˆ¶å°: http://localhost:19001"
```

### 7.4 å¼€å‘ç¯å¢ƒå¿«é€Ÿå¯åŠ¨

#### 7.4.1 æœ¬åœ°å¼€å‘é…ç½®

**åç«¯å¯åŠ¨ (application-dev.yml)**

```yaml
server:
  port: 8081

spring:
  datasource:
    url: jdbc:p6spy:postgresql://localhost:15432/robot
    username: postgres
    password: catairobot
  ai:
    openai:
      base-url: https://dashscope.aliyuncs.com/compatible-mode
      api-key: sk-3ba280e44d184f83a1210d36108db6f8

minio:
  endpoint: http://localhost:19000
  accessKey: catairobot
  secretKey: catairobot
  bucketName: cat-ai-robot
```

**å‰ç«¯å¯åŠ¨ (vite.config.js)**

```javascript
export default defineConfig({
  server: {
    port: 5173,
    proxy: {
      '/api': {
        target: 'http://localhost:8081',
        changeOrigin: true
      }
    }
  },
  // å¿«é€Ÿå¼€å‘é…ç½®
  plugins: [
    vue(),
    // ç»„ä»¶è‡ªåŠ¨å¯¼å…¥
    Components({
      resolvers: [AntDesignVueResolver()]
    })
  ]
})
```

---

## 8. å®‰å…¨è®¾è®¡

### 8.1 å¿«é€Ÿå¼€å‘çš„å®‰å…¨ç­–ç•¥

#### 8.1.1 åŸºç¡€å®‰å…¨æªæ–½

![1759069797698](images/ğŸ±Cat-AI-Robot-æ¶æ„è®¾è®¡æ–‡æ¡£/1759069797698.png)

### 8.2 æ ¸å¿ƒå®‰å…¨å®ç°

#### 8.2.1 è¾“å…¥éªŒè¯æœºåˆ¶

```java
// å‚æ•°æ ¡éªŒæ³¨è§£ - å¿«é€ŸéªŒè¯
@PostMapping("/chat/new")
public Response newChat(@Valid @RequestBody NewChatReqVO request) {
    // è‡ªåŠ¨å‚æ•°æ ¡éªŒ
}

// VOç±»å®šä¹‰
@Data
public class NewChatReqVO {
    @NotBlank(message = "æ¶ˆæ¯å†…å®¹ä¸èƒ½ä¸ºç©º")
    @Length(max = 4000, message = "æ¶ˆæ¯é•¿åº¦ä¸èƒ½è¶…è¿‡4000å­—ç¬¦")
    private String message;
  
    @NotNull(message = "è§’è‰²IDä¸èƒ½ä¸ºç©º")
    @Min(value = 1, message = "è§’è‰²IDå¿…é¡»å¤§äº0")
    private Long roleId;
}
```

#### 8.2.2 XSSé˜²æŠ¤å¤„ç†

```java
// å…¨å±€XSSè¿‡æ»¤å™¨
@Component
public class XssFilter implements Filter {
    @Override
    public void doFilter(ServletRequest request, ServletResponse response, 
                        FilterChain chain) throws IOException, ServletException {
        XssHttpServletRequestWrapper wrappedRequest = 
            new XssHttpServletRequestWrapper((HttpServletRequest) request);
        chain.doFilter(wrappedRequest, response);
    }
}

// HTMLè½¬ä¹‰å·¥å…·
public class XssUtils {
    public static String cleanXss(String value) {
        if (StringUtils.isBlank(value)) {
            return value;
        }
        return HtmlUtils.htmlEscape(value);
    }
}
```

#### 8.2.3 æ–‡ä»¶ä¸Šä¼ å®‰å…¨

```java
// æ–‡ä»¶ç±»å‹ç™½åå•
@Service
public class FileService {
    private static final Set<String> ALLOWED_TYPES = Set.of(
        "image/jpeg", "image/png", "image/gif",
        "audio/webm", "audio/mp3", "audio/wav"
    );
  
    public String uploadFile(MultipartFile file) {
        // 1. æ–‡ä»¶ç±»å‹æ£€æŸ¥
        if (!ALLOWED_TYPES.contains(file.getContentType())) {
            throw new BizException("ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹");
        }
  
        // 2. æ–‡ä»¶å¤§å°é™åˆ¶
        if (file.getSize() > 10 * 1024 * 1024) { // 10MB
            throw new BizException("æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡10MB");
        }
  
        // 3. æ–‡ä»¶åå®‰å…¨å¤„ç†
        String originalName = file.getOriginalFilename();
        String safeName = originalName.replaceAll("[^a-zA-Z0-9._-]", "");
  
        return minioUtil.uploadFile(file, safeName);
    }
}
```

### 8.3 CORSè·¨åŸŸé…ç½®

```java
// è·¨åŸŸé…ç½® - å¼€å‘å‹å¥½
@Configuration
public class CorsConfig {
    @Bean
    public CorsConfigurationSource corsConfigurationSource() {
        CorsConfiguration configuration = new CorsConfiguration();
  
        // å¼€å‘ç¯å¢ƒé…ç½®
        configuration.setAllowedOriginPatterns(Arrays.asList(
            "http://localhost:*",
            "http://127.0.0.1:*",
            "https://*.example.com" // ç”Ÿäº§åŸŸå
        ));
  
        configuration.setAllowedMethods(Arrays.asList("GET", "POST", "PUT", "DELETE", "OPTIONS"));
        configuration.setAllowedHeaders(Arrays.asList("*"));
        configuration.setAllowCredentials(true);
        configuration.setMaxAge(3600L);
  
        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
        source.registerCorsConfiguration("/**", configuration);
        return source;
    }
}
```

---

## 9. æ€§èƒ½ä¼˜åŒ–

### 9.1 ä¸€å‘¨å¼€å‘çš„æ€§èƒ½ä¼˜åŒ–é‡ç‚¹

#### 9.1.1 å…³é”®æ€§èƒ½æŒ‡æ ‡


| æ€§èƒ½æŒ‡æ ‡         | ç›®æ ‡å€¼  | å®ç°æ–¹å¼       | ä¼˜å…ˆçº§ |
| ---------------- | ------- | -------------- | ------ |
| **é¦–é¡µåŠ è½½æ—¶é—´** | < 2ç§’   | ä»£ç åˆ†å‰²ã€CDN  | ğŸ”¥ é«˜  |
| **å¯¹è¯å“åº”æ—¶é—´** | < 500ms | æµå¼å“åº”ã€ç¼“å­˜ | ğŸ”¥ é«˜  |
| **è¯­éŸ³å¤„ç†æ—¶é—´** | < 3ç§’   | å¼‚æ­¥å¤„ç†ã€å‹ç¼© | â­ ä¸­  |
| **å¹¶å‘ç”¨æˆ·æ•°**   | 100+    | è¿æ¥æ± ã€ç¼“å­˜   | â­ ä¸­  |

### 9.2 å‰ç«¯æ€§èƒ½ä¼˜åŒ–

#### 9.2.1 å¿«é€Ÿä¼˜åŒ–ç­–ç•¥

```javascript
// 1. è·¯ç”±æ‡’åŠ è½½ - å‡å°‘é¦–å±åŠ è½½æ—¶é—´
const routes = [
  {
    path: '/',
    component: () => import('@/layouts/Layout.vue')
  },
  {
    path: '/role-management',
    component: () => import('@/views/RoleManagement.vue')
  }
]

// 2. ç»„ä»¶æ‡’åŠ è½½ - æŒ‰éœ€åŠ è½½
const StreamMarkdownRender = defineAsyncComponent({
  loader: () => import('@/components/StreamMarkdownRender.vue'),
  loadingComponent: LoadingSpinner,
  delay: 200
})

// 3. å›¾ç‰‡æ‡’åŠ è½½ - ä¼˜åŒ–å›¾ç‰‡åŠ è½½
<img 
  v-lazy="convertMinioUrl(role.avatarUrl)" 
  :alt="role.name"
  class="role-avatar"
/>
```

#### 9.2.2 Viteæ„å»ºä¼˜åŒ–

```javascript
// vite.config.js - ç”Ÿäº§æ„å»ºä¼˜åŒ–
export default defineConfig({
  build: {
    // ä»£ç åˆ†å‰²
    rollupOptions: {
      output: {
        manualChunks: {
          'vendor': ['vue', 'vue-router'],
          'ui': ['ant-design-vue'],
          'utils': ['markdown-it', 'highlight.js']
        }
      }
    },
    // å‹ç¼©é…ç½®
    minify: 'terser',
    terserOptions: {
      compress: {
        drop_console: true,
        drop_debugger: true
      }
    }
  },
  // å¼€å‘æœåŠ¡å™¨ä¼˜åŒ–
  server: {
    hmr: {
      overlay: false
    }
  }
})
```

### 9.3 åç«¯æ€§èƒ½ä¼˜åŒ–

#### 9.3.1 æ•°æ®åº“è¿æ¥æ± ä¼˜åŒ–

```yaml
# application.yml - è¿æ¥æ± è°ƒä¼˜
spring:
  datasource:
    hikari:
      # æ ¸å¿ƒé…ç½®
      maximum-pool-size: 20          # æœ€å¤§è¿æ¥æ•°
      minimum-idle: 5                # æœ€å°ç©ºé—²è¿æ¥
      connection-timeout: 30000      # è¿æ¥è¶…æ—¶30ç§’
      idle-timeout: 600000           # ç©ºé—²è¶…æ—¶10åˆ†é’Ÿ
      max-lifetime: 1800000          # è¿æ¥æœ€å¤§ç”Ÿå‘½å‘¨æœŸ30åˆ†é’Ÿ
  
      # æ€§èƒ½ä¼˜åŒ–
      connection-test-query: SELECT 1
      validation-timeout: 5000
      leak-detection-threshold: 60000
```

#### 9.3.2 æŸ¥è¯¢ä¼˜åŒ–

```java
// åˆ†é¡µæŸ¥è¯¢ä¼˜åŒ– - é¿å…æ·±åˆ†é¡µ
@Service
public class ChatService {
    public PageResponse<ChatMessageDO> getChatMessages(String chatId, 
                                                       Long lastId, 
                                                       int size) {
        // ä½¿ç”¨æ¸¸æ ‡åˆ†é¡µä»£æ›¿offsetåˆ†é¡µ
        QueryWrapper<ChatMessageDO> wrapper = new QueryWrapper<>();
        wrapper.eq("chat_uuid", chatId);
  
        if (lastId != null) {
            wrapper.lt("id", lastId); // æ¸¸æ ‡åˆ†é¡µ
        }
  
        wrapper.orderByDesc("id").last("LIMIT " + size);
  
        List<ChatMessageDO> messages = chatMessageMapper.selectList(wrapper);
        return PageResponse.of(messages);
    }
}
```

#### 9.3.3 AIæœåŠ¡è°ƒç”¨ä¼˜åŒ–

```java
// æµå¼å“åº”ä¼˜åŒ–
@Service
public class ChatService {
    @Async("taskExecutor") // å¼‚æ­¥å¤„ç†
    public Flux<AIResponse> streamChat(AiChatReqVO request) {
        return ChatClient.create(chatModel)
            .prompt()
            .user(request.getMessage())
            .advisors(advisors)
            .stream()
            .content()
            .map(text -> AIResponse.builder().v(text).build())
            // èƒŒå‹å¤„ç†
            .onBackpressureBuffer(1000)
            // é”™è¯¯æ¢å¤
            .onErrorReturn(AIResponse.builder().v("æŠ±æ­‰ï¼Œè¯·æ±‚å¤±è´¥").build());
    }
}
```

### 9.4 ç¼“å­˜ç­–ç•¥

#### 9.4.1 ç®€åŒ–ç¼“å­˜æ–¹æ¡ˆ

```java
// æœ¬åœ°ç¼“å­˜ - å¿«é€Ÿå®ç°
@Configuration
@EnableCaching
public class CacheConfig {
    @Bean
    public CacheManager cacheManager() {
        CaffeineCacheManager cacheManager = new CaffeineCacheManager();
        cacheManager.setCaffeine(Caffeine.newBuilder()
            .maximumSize(1000)
            .expireAfterWrite(30, TimeUnit.MINUTES)
            .recordStats());
        return cacheManager;
    }
}

// ç¼“å­˜ä½¿ç”¨
@Service
public class RoleService {
    @Cacheable(value = "roles", key = "#id")
    public RoleDO getRoleById(Long id) {
        return roleMapper.selectById(id);
    }
  
    @CacheEvict(value = "roles", key = "#role.id")
    public void updateRole(RoleDO role) {
        roleMapper.updateById(role);
    }
}
```

---

## ğŸ“ æ€»ç»“

### âœ… é¡¹ç›®æˆæœ

Cat-AI-Roboté¡¹ç›®åœ¨**7å¤©æ—¶é—´å†…ç”±3äººå›¢é˜Ÿ**æˆåŠŸäº¤ä»˜ï¼Œå®ç°äº†ä»é›¶åˆ°å®Œæ•´äº§å“çš„å¿«é€Ÿå¼€å‘ï¼Œå…·å¤‡ä»¥ä¸‹ç‰¹ç‚¹ï¼š

#### ğŸš€ å¿«é€Ÿå¼€å‘æˆæœ

**æŠ€æœ¯å®ç°äº®ç‚¹ï¼š**

1. **é«˜æ•ˆåä½œ**ï¼šä¸‰äººåˆ†å·¥æ˜ç¡®ï¼Œå‰ç«¯ã€åç«¯ã€å…¨æ ˆå„å¸å…¶èŒ
2. **æŠ€æœ¯é€‰å‹ç²¾å‡†**ï¼šSpring AI + Vue3ï¼Œå‡å°‘50%å¼€å‘æ—¶é—´
3. **æ¶æ„è®¾è®¡åˆç†**ï¼šä¸ºåç»­æ‰©å±•é¢„ç•™å……åˆ†ç©ºé—´
4. **éƒ¨ç½²æ–¹æ¡ˆå®Œæ•´**ï¼šDockerä¸€é”®éƒ¨ç½²ï¼Œè¿ç»´å‹å¥½

**åŠŸèƒ½å®Œæˆåº¦ï¼š**

- âœ… æ™ºèƒ½æ–‡æœ¬å¯¹è¯ï¼ˆæµå¼å“åº”ï¼‰
- âœ… è¯­éŸ³äº¤äº’åŠŸèƒ½ï¼ˆASR + TTSï¼‰
- âœ… è§’è‰²ç®¡ç†ç³»ç»Ÿ
- âœ… ä¼šè¯å†å²ç®¡ç†
- âœ… æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½
- âœ… å“åº”å¼UIè®¾è®¡

#### ğŸ¯ ä¸€å‘¨å¼€å‘çš„å…³é”®å› ç´ 

**æˆåŠŸè¦ç´ åˆ†æï¼š**

1. **æŠ€æœ¯æ ˆä¼˜åŠ¿**

   - Spring AIæ¡†æ¶ï¼šå‡å°‘AIé›†æˆå¤æ‚åº¦
   - Vue3 + Viteï¼šæé€Ÿå¼€å‘ä½“éªŒ
   - Ant Design Vueï¼šç°æˆUIç»„ä»¶
   - Dockeréƒ¨ç½²ï¼šä¸€é”®ç¯å¢ƒæ­å»º
2. **å¼€å‘æµç¨‹ä¼˜åŒ–**

   - æ¯æ—¥ç«™ä¼šåŒæ­¥è¿›åº¦
   - å…³é”®èŠ‚ç‚¹è¯„å®¡
   - å‰åç«¯å¹¶è¡Œå¼€å‘
   - æŒç»­é›†æˆæµ‹è¯•
3. **æ¶æ„è®¾è®¡ç†å¿µ**

   - æœ€å°å¯ç”¨äº§å“ï¼ˆMVPï¼‰
   - å¿«é€Ÿè¿­ä»£ä¼˜äºå®Œç¾è®¾è®¡
   - ä¸ºæ‰©å±•é¢„ç•™æ¥å£
   - ç®€åŒ–ä¸å¿…è¦çš„å¤æ‚åº¦

#### ğŸ”® å‘å±•å‰æ™¯

**çŸ­æœŸç›®æ ‡ï¼ˆ1ä¸ªæœˆå†…ï¼‰ï¼š**

- ç”¨æˆ·ç³»ç»Ÿå®Œå–„
- æ€§èƒ½ä¼˜åŒ–
- åŠŸèƒ½å¢å¼º
- ç§»åŠ¨ç«¯é€‚é…

**ä¸­æœŸç›®æ ‡ï¼ˆ3ä¸ªæœˆå†…ï¼‰ï¼š**

- å¾®æœåŠ¡æ¶æ„æ‹†åˆ†
- çŸ¥è¯†åº“é›†æˆ
- APIå¼€æ”¾å¹³å°
- ä¼ä¸šçº§å®‰å…¨

**é•¿æœŸç›®æ ‡ï¼ˆ6ä¸ªæœˆå†…ï¼‰ï¼š**

- å‘é‡æ•°æ®åº“é›†æˆ
- RAGçŸ¥è¯†å¢å¼º
- å¤šæ¨¡æ€äº¤äº’
- æ™ºèƒ½æ¨èç³»ç»Ÿ

#### ğŸ“Š é¡¹ç›®ä»·å€¼è¯„ä¼°


| è¯„ä¼°ç»´åº¦       | å¾—åˆ†       | è¯´æ˜                  |
| -------------- | ---------- | --------------------- |
| **å¼€å‘æ•ˆç‡**   | â­â­â­â­â­ | 7å¤©å®Œæˆå®Œæ•´äº§å“       |
| **æŠ€æœ¯å…ˆè¿›æ€§** | â­â­â­â­â­ | åŸºäºæœ€æ–°Spring AIæ¡†æ¶ |
| **ç”¨æˆ·ä½“éªŒ**   | â­â­â­â­â­ | æµå¼å¯¹è¯ï¼Œè¯­éŸ³äº¤äº’    |
| **æ‰©å±•æ€§**     | â­â­â­â­   | æ¶æ„è®¾è®¡æ”¯æŒåç»­æ‰©å±•  |
| **éƒ¨ç½²å‹å¥½**   | â­â­â­â­â­ | Dockerä¸€é”®éƒ¨ç½²        |

### ğŸ† å›¢é˜Ÿè´¡çŒ®

**å¼€å‘å›¢é˜Ÿï¼š**

- **åç«¯æ¶æ„å¸ˆ** - [å´å…‰è€€]ï¼šSpring AI åç«¯å¼€å‘é›†æˆä¸“å®¶
- **å‰ç«¯å·¥ç¨‹å¸ˆ** - [æå¤©å®‡]ï¼šVue3ï¼Œæ•°æ®åº“äº¤äº’è®¾è®¡ä¸“å®¶
- **å…¨æ ˆå·¥ç¨‹å¸ˆ** - [æ±Ÿå›½å‡¯]ï¼šå‰åç«¯é‡è¦åŠŸèƒ½è”è°ƒå¤„ç†å’Œéƒ¨ç½²ä¸“å®¶

**é¡¹ç›®ç‰¹è‰²ï¼š**
è¿™ä¸ªé¡¹ç›®å±•ç¤ºäº†ç°ä»£æ•æ·å¼€å‘çš„å…¸å‹èŒƒä¾‹ï¼š**å°å›¢é˜Ÿã€çŸ­å‘¨æœŸã€é«˜è´¨é‡**çš„äº§å“äº¤ä»˜èƒ½åŠ›ï¼Œè¯æ˜äº†åˆé€‚çš„æŠ€æœ¯é€‰å‹å’Œé«˜æ•ˆçš„å›¢é˜Ÿåä½œèƒ½å¤Ÿåœ¨æçŸ­æ—¶é—´å†…æ„å»ºå‡ºåŠŸèƒ½å®Œæ•´çš„AIåº”ç”¨äº§å“ã€‚

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0
**é¡¹ç›®å‘¨æœŸ**ï¼š2025å¹´9æœˆ22æ—¥ - 2025å¹´9æœˆ28æ—¥
**å¼€å‘å›¢é˜Ÿ**ï¼š3äººå°ç»„åä½œï¼ˆå…·ä½“åˆ†å·¥å¾…ç¡®å®šï¼‰
**æœ€åæ›´æ–°**ï¼š2025å¹´9æœˆ28æ—¥


| å§“å   | é‚®ç®±                | ç”µè¯        |
| ------ | ------------------- | ----------- |
| å´å…‰è€€ | 1582316589@qq.com   | 17734894660 |
| æ±Ÿå›½å‡¯ | 13534758041@163.com | 13534758041 |
| æå¤©å®‡ | 2543482922@qq.com   | 18171016991 |
